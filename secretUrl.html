<!DOCTYPE html>
<html>

<head>
    <title></title>
</head>

<body>
    <div>
        <p>
            Key:
            <br> Yes -> 1
            <br> No -> 0
            <br> $ -> 1
            <br> $$ -> .5
            <br> $$$ -> 0
            <br> Full -> 1
            <br> Some -> .5
            <br> None -> 0
            <br> Thai -> 1
            <br> French -> .66
            <br> Burger -> .33
            <br> Italian -> 0
            <br> >60 -> 1
            <br> 30-60 -> .66
            <br> 10-30 -> .33
            <br> 0-10 -> 0
            <br>
        </p>
    </div>
    <label for="alt">Alt</label>
    <select id="alt" name="alt">
        <option value="1">Yes</option>
        <option value="0">No</option>
    </select>
    <label for="bar">Bar</label>
    <select id="bar" name="bar">
        <option value="1">Yes</option>
        <option value="0">No</option>
    </select>
    <label for="fri">Fri</label>
    <select id="fri" name="fri">
        <option value="1">Yes</option>
        <option value="0">No</option>
    </select>
    <label for="patrons">Patrons</label>
    <select id="patrons" name="patrons">
        <option value="1">Full</option>
        <option value=".5">Some</option>
        <option value="0">None</option>
    </select>
    <label for="price">Price</label>
    <select id="price" name="price">
        <option value="1">$</option>
        <option value=".5">$$</option>
        <option value="0">$$$</option>
    </select>
    <label for="rain">Rain</label>
    <select id="rain" name="rain">
        <option value="1">Yes</option>
        <option value="0">No</option>
    </select>
    <label for="res">Res</label>
    <select id="res" name="res">
        <option value="1">Yes</option>
        <option value="0">No</option>
    </select>
    <label for="type">Type</label>
    <select id="type" name="type">
        <option value="1">Thai</option>
        <option value=".66">French</option>
        <option value=".33">Burger</option>
        <option value="0">Italian</option>
    </select>
    <label for="est">Est</label>
    <select id="est" name="est">
        <option value="1">>60</option>
        <option value=".66">30-60</option>
        <option value=".33">10-30</option>
        <option value="0">0-10</option>
    </select>
    <br>
    <br>
    <br>
    <br>
    <input type="button" id="button" value="Test">
    <br>
    <br>
    <br>
    <br>
    <div id="output"></div>
    <br>
    <br>
    <br>
    <dir id="weights">Training model....</dir>
    <canvas id="canvas"></canvas>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/synaptic/1.1.4/synaptic.js"></script>
    <script type="text/javascript">
    var makeArray = function() {
        var selectTags = document.getElementsByTagName("select");
        var array = [];

        for (var i = 0; i < selectTags.length; i++) {
            array.push(Number(selectTags[i].value));
        }

        console.log("Generated array ", array);

        document.getElementById("output").innerHTML = Math.round(nerNet.activate(array)) ? "Output: Yes" : "Output: No";

    }




    var Neuron = synaptic.Neuron,
        Layer = synaptic.Layer,
        Network = synaptic.Network,
        Trainer = synaptic.Trainer,
        Architect = synaptic.Architect;


    var inputLayer = new Layer(9);
    var hiddenLayer = new Layer(3);
    var outputLayer = new Layer(1);


    inputLayer.project(hiddenLayer);
    hiddenLayer.project(outputLayer);
    var nerNet = new Network({
        input: inputLayer,
        hidden: [hiddenLayer],
        output: outputLayer
    });

    //Yes  		-> 1
    //No 		-> 0

    //$			-> 1
    //$$		-> .5
    //$$$ 		-> 0

    //Full		-> 1
    //Some		-> .5
    //None		-> 0

    //Thai 		-> 1
    //French 	-> .66
    //Burger	-> .33
    //Italian	-> 0

    //>60		-> 1
    //30-60		-> .66
    //10-30		-> .33
    //0-10		-> 0

    // train the network
    var learningRate = .3;
    for (var i = 0; i < 200000; i++) {
        //X1
        nerNet.activate([1, 0, 0, .5, 0, 0, 1, .66, 0]);
        nerNet.propagate(learningRate, [1]);
        //X2
        nerNet.activate([1, 0, 0, 1, 1, 0, 0, 1, .66]);
        nerNet.propagate(learningRate, [0]);
        //X3
        nerNet.activate([0, 1, 0, .5, 1, 0, 0, .33, 0]);
        nerNet.propagate(learningRate, [1]);
        //X4
        nerNet.activate([1, 0, 1, 1, 1, 1, 0, 1, .33]);
        nerNet.propagate(learningRate, [1]);
        //X5
        nerNet.activate([1, 1, 1, 1, 0, 0, 1, .66, 1]);
        nerNet.propagate(learningRate, [0]);
        //X6
        nerNet.activate([0, 0, 0, .5, .5, 1, 1, 0, 0]);
        nerNet.propagate(learningRate, [1]);
        //X7
        nerNet.activate([0, 0, 0, 0, 1, 1, 0, .33, 0]);
        nerNet.propagate(learningRate, [0]);
        //X8
        nerNet.activate([0, 0, 0, .5, .5, 1, 1, 1, 0]);
        nerNet.propagate(learningRate, [1]);
        //X9
        nerNet.activate([0, 0, 1, 1, 1, 1, 0, .33, 1]);
        nerNet.propagate(learningRate, [0]);
        //X10
        nerNet.activate([1, 1, 1, 1, 0, 0, 1, 0, .33]);
        nerNet.propagate(learningRate, [0]);
        //X11
        nerNet.activate([0, 0, 0, 0, 1, 0, 0, 1, 0]);
        nerNet.propagate(learningRate, [0]);
        //X12
        nerNet.activate([1, 1, 1, 1, 1, 0, 0, .33, .66]);
        nerNet.propagate(learningRate, [1]);
    }


    var weightsElement = document.getElementById("weights");


    weightsElement.innerHTML = "The weights are as follows: <br>"
	var mystery = 13;
    for(var i = 0; i<9; i++){
    	
    	weightsElement.innerHTML += "<br>"+inputLayer.neurons()[i].connections.projected[mystery+0].weight+"<br>"+inputLayer.neurons()[i].connections.projected[mystery+1].weight+"<br>"+inputLayer.neurons()[i].connections.projected[mystery+2].weight+"<br>";
    	mystery += 3;
    }

    document.getElementById("button").addEventListener("click", makeArray);
    </script>
</body>

</html>